import SEO from '../../components/SEO';

<SEO
  title="RangeInput"
  description="RangeInput allows user to be able to search through items that within min and max value."
/>

# RangeInput

RangeInput allows user to be able to search through items that within min and max value.

## Import

```js
import { RangeInput } from '@sajari/react-components';
import { RangeFilter, EVENT_SELECTION_UPDATED } from '@sajari/react-hooks';
```

## Usage

```jsx
function Example() {
  const rangeFilter = new RangeFilter('range', [0, 500]);
  rangeFilter.set(200, 300);
  const [filterOutput, setFilterOutput] = React.useState(rangeFilter.filter());

  rangeFilter.listen(EVENT_SELECTION_UPDATED, () => {
    setFilterOutput(rangeFilter.filter());
  });

  return (
    <div className="flex flex-col">
      <RangeInput filter={rangeFilter} />
      <pre className="self-center">"{filterOutput}"</pre>
    </div>
  );
}
```

### Custom input

You can also use your own input by passing a function to `leftInput` or `rightInput` props. Make sure to call `getProps`, then spread the `inputProps` and `labelProps` to its corresponding element to preserve accessibility. The `ref` is meant to be spread on the input element.

Note that as we uses [`Adobe's React-Aria`](https://react-spectrum.adobe.com/react-aria/useTextField.html) package internally, `useTextField` doesn't accept `min` or `max` for unknown reason, therefore as a workaround we must spread those manually.

```jsx
function Example() {
  const rangeFilter = new RangeFilter('range', [0, 500]);
  rangeFilter.set(200, 300);
  const [filterOutput, setFilterOutput] = React.useState(rangeFilter.filter());

  rangeFilter.listen(EVENT_SELECTION_UPDATED, () => {
    setFilterOutput(rangeFilter.filter());
  });

  return (
    <div className="flex flex-col">
      <RangeInput
        filter={rangeFilter}
        leftInput={({ getProps, ref }) => {
          const { inputProps, labelProps } = getProps({ label: 'Custom left input' });
          return (
            <div className="flex">
              <label className="sr-only" {...labelProps}>
                Custom left input
              </label>
              <input {...inputProps} min={0} max={500} ref={ref} />
            </div>
          );
        }}
      />
      <pre className="self-center">"{filterOutput}"</pre>
    </div>
  );
}
```

### Usage without Filter controller

In case you don't want to depend on `RangeFilter`, you can otp-out of that by passing `limit`, `value`, `onChange` to the `RangeInput`.

```jsx
function Example() {
  const [range, setRange] = React.useState([100, 200]);
  return (
    <div className="flex flex-col">
      <RangeInput min={0} max={500} value={range} onChange={setRange} />
      <pre className="self-center">
        "[{range[0]}, {range[1]}]"
      </pre>
    </div>
  );
}
```

### Customize number of handles

```jsx
function Example() {
  const [range, setRange] = React.useState([100]);
  return (
    <div className="flex flex-col space-y-4">
      <RangeInput min={0} max={500} value={range} onChange={setRange} />
      <pre className="self-center">"[{range[0]}]"</pre>
    </div>
  );
}
```

## Props

| Name         | Type                                     | Default    | Description                                                                                       |
| ------------ | ---------------------------------------- | ---------- | ------------------------------------------------------------------------------------------------- |
| `min`        | `number`                                 | `0`        | The min range, used when you want to use the component without RangeFilter                        |
| `max`        | `number`                                 | `100`      | The max range, used when you want to use the component without RangeFilter                        |
| `value`      | `[number, number]`                       | `[25, 50]` | The current value of the range input, used when you want to use the component without RangeFilter |
| `onChange`   | `(value: [number, number]) => void`      | `() => {}` | The callback when the value changes, used when you want to use the component without RangeFilter  |
| `filter`     | `RangeFilter`                            |            | The RangeFilter object                                                                            |
| `leftInput`  | `({ getProps, ref }) => React.ReactNode` | `<Input/>` | The left input to set the range's min value                                                       |
| `rightInput` | `({ getProps, ref }) => React.ReactNode` | `<Input/>` | The right input to set the range's min value                                                      |
