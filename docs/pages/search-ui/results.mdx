import SEO, { scopes } from '../../components/SEO';

<SEO
  title="Results"
  scope={scopes.searchUI}
  description="The Results component is used to display results response from a search query."
/>

# Results

The `Results` component is used to display results response from a search query.

```js
import { Results } from '@sajari/react-search-ui';
```

## Usage

Additional imports used in the examples:

```js
import { FieldDictionary, Pipeline, SearchProvider } from '@sajari/react-search-ui';
```

```jsx
function Example() {
  const pipeline = new Pipeline(
    {
      account: '1594153711901724220',
      collection: 'bestbuy',
    },
    'query',
  );

  return (
    <SearchProvider
      search={{
        pipeline,
        fields: new FieldDictionary({
          title: 'name',
          subtitle: (data) => data.level4 || data.level3 || data.level2 || data.level1 || data.brand,
        }),
        variables: new Variables({
          resultsPerPage: 5,
          q: 'iphone',
        }),
      }}
      searchOnLoad
    >
      <Results />
    </SearchProvider>
  );
}
```

### Grid display

```jsx
function Example() {
  const pipeline = new Pipeline(
    {
      account: '1594153711901724220',
      collection: 'bestbuy',
    },
    'query',
  );

  return (
    <SearchProvider
      search={{
        pipeline,
        fields: new FieldDictionary({
          title: 'name',
          subtitle: (data) => data.level4 || data.level3 || data.level2 || data.level1 || data.brand,
        }),
        variables: new Variables({
          resultsPerPage: 6,
          q: 'macbook',
        }),
      }}
      searchOnLoad
    >
      <Results appearance="grid" />
    </SearchProvider>
  );
}
```

### Product variant images

If your collection's products have variants (e.g Shopify), you can map `image` and `price` to an be an array of image urls and prices, respectively.

```jsx
function Example() {
  const pipeline = new Pipeline(
    {
      account: '1617265323067869891',
      collection: 'tuandaosajari',
      endpoint: '//jsonapi-au-staging-valkyrie2.sajari.com',
    },
    'query',
  );

  const fields = new FieldDictionary({
    url: '/products/${handle}',
    subtitle: 'vendor',
    description: 'body_html',
    image: (values) => {
      const variantImages = values.variant_ids.map((_, i) => {
        const variantImageId = values.variant_image_ids[i];
        const variantImageIndex = values.image_ids.findIndex((ii) => ii === variantImageId);
        const variantImageUrl = values.image_urls[variantImageIndex];

        return variantImageUrl;
      });

      return [values.image_urls[0], ...variantImages];
    },
    price: (values) => {
      return [values.variant_prices, ...values.variant_prices];
    },
    originalPrice: 'variant_compare_at_prices',
  });

  return (
    <SearchProvider
      search={{
        pipeline,
        fields,
        variables: new Variables({ q: 'double pocket skirt' }),
      }}
      searchOnLoad
    >
      <div className="flex flex-col items-center space-y-4">
        <ViewType />
        <Results />
      </div>
    </SearchProvider>
  );
}
```

## Props

| Name                | Type                                         | Default   | Description                                                                                                                     |
| ------------------- | -------------------------------------------- | --------- | ------------------------------------------------------------------------------------------------------------------------------- |
| `appearance`        | `list` \| `grid`                             |           | The controlled value, passing this means you're ignoring the value in context.                                                  |
| `defaultAppearance` | `list` \| `grid`                             | `list`    | The uncontrolled value, will override the context value on mount.                                                               |
| `showImage`         | `boolean`                                    | `true`    | Sets to show images                                                                                                             |
| `showVariantImage`  | `boolean`                                    | `false`   | Sets to show variant images                                                                                                     |
| `imageAspectRatio`  | `number` \| `{ list: number, grid: number}`  | `1`       | The aspect ratio to force images to render to.                                                                                  |
| `imageObjectFit`    | `string` \| `{ list: string, grid: string }` | `contain` | The aspect ratio to force images to render to. Valid `objectFit` values can be found in [image props](/components/image#props). |
